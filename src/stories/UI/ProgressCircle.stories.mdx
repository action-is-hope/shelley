import { Meta, Canvas, Story, ArgsTable, Source } from "@storybook/addon-docs";
import dedent from "ts-dedent";
import { Modal, ProgressCircle } from "../../indexLib";
import { StoryGrid, StoryCenteredInline } from "../StoryLayout";

<Meta
  title="Status/ProgressCircle"
  argTypes={{
    inputPosition: {
      options: ["start", "end", "top", "bottom"],
      control: { type: "inline-radio" },
      defaultValue: "over",
    },
  }}
  component={Modal}
/>

# ProgressCircle

<Source
  language="tsx"
  code={dedent`
    import { ProgressCircle } from "@actionishope/shelley";
  `}
/>

ProgressCircles show the progression of a system operation such as downloading, uploading, or processing, in a visual way. They can represent determinate or indeterminate progress.

## Example

<Story
  name="a) ProgressCircle"
  decorators={[
    (Story) => (
      <StoryCenteredInline>
        <Story />
      </StoryCenteredInline>
    ),
  ]}
>
  <ProgressCircle aria-label="Loading…" value={90} />
</Story>

<Source language="tsx" id="status-progresscircle--a-progress-circle" />

## Value

ProgressCircles are controlled with the `value` prop. By default, the `value` prop represents the current percentage of progress, as the minimum and maxiumum values default to 0 and 100, respectively.

<Story
  name="b) Value"
  decorators={[
    (Story) => (
      <StoryCenteredInline>
        <Story />
      </StoryCenteredInline>
    ),
  ]}
>
  <ProgressCircle aria-label="Loading…" value={25} />
</Story>

<Source language="tsx" id="status-progresscircle--b-value" />

Alternatively, a different scale can be used by setting the `minValue` and `maxValue` props.

<Story
  name="c) Scale"
  decorators={[
    (Story) => (
      <StoryCenteredInline>
        <Story />
      </StoryCenteredInline>
    ),
  ]}
>
  <ProgressCircle
    aria-label="Loading…"
    minValue={50}
    maxValue={150}
    value={100}
  />
</Story>

<Source language="tsx" id="status-progresscircle--c-scale" />

### Indeterminate

By default, ProgressCircles are determinate. Use a determinate ProgressCircle when progress can be calculated against a specific goal. Use an indeterminate ProgressCircle when progress is happening but the time or effort to completion can't be determined.

<Story
  name="d) Indeterminate"
  decorators={[
    (Story) => (
      <StoryCenteredInline>
        <Story />
      </StoryCenteredInline>
    ),
  ]}
>
  <ProgressCircle aria-label="Loading…" isIndeterminate />
</Story>

<Source language="tsx" id="status-progresscircle--d-indeterminate" />

### Accessibility

An `aria-label` must be provided for accessibility. If the ProgressCircle is labeled by a separate element, an `aria-labelledby` prop must be provided using the `id` of the labeling element instead.

If using the `overBackground` variant, ensure the background offers enough contrast for the ProgressCircle to be legible and meets color contrast guidelines.

### Internationalisation

To internationalise a ProgressCircle, a localized string should be passed to the `aria-label` prop (or value of the associated `aria-labelledby` element).

For languages that are read right-to-left (e.g. Hebrew and Arabic), the fill of both determinate and indeterminate ProgressCircles continues to spin clockwise.

## Visual options

### Size

<Story
  name="e) Size"
  decorators={[
    (Story) => (
      <StoryCenteredInline>
        <Story />
      </StoryCenteredInline>
    ),
  ]}
>
  <ProgressCircle
    aria-label="Loading…"
    marginEnd="size-300"
    size="small"
    value={15}
  />
  <ProgressCircle aria-label="Loading…" marginEnd="size-300" value={30} />
  <ProgressCircle aria-label="Loading…" size="large" value={60} />
</Story>

<Source language="tsx" id="status-progresscircle--e-size" />

### Variant

<Story
  name="f) Over background"
  decorators={[
    (Story) => (
      <StoryCenteredInline>
        <Story />
      </StoryCenteredInline>
    ),
  ]}
>
  <ProgressCircle aria-label="Loading…" isIndeterminate />
</Story>

<Source language="tsx" id="status-progresscircle--f-over-background" />

## ProgressCircle Props

Check the table below for a full list of props.

<ArgsTable of={ProgressCircle} />

## Styling

<Source
  language="css"
  dark
  format={false}
  code={dedent`
    #docs {
      write-some: style-docs;
    }
  `}
/>
