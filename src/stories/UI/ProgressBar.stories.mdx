import { Meta, Canvas, Story, ArgsTable, Source } from "@storybook/addon-docs";
import dedent from "ts-dedent";
import { Modal, ProgressBar } from "../../indexLib";
import { StoryGrid, StoryCenteredInline } from "../StoryLayout";

<Meta
  title="Status/ProgressBar"
  argTypes={{
    inputPosition: {
      options: ["start", "end", "top", "bottom"],
      control: { type: "inline-radio" },
      defaultValue: "over",
    },
  }}
  component={Modal}
/>

# ProgressBar

<Source
  language="tsx"
  code={dedent`
    import { ProgressBar } from "@actionishope/shelley";
  `}
/>

ProgressBars show the progression of a system operation such as downloading, uploading, or processing, in a visual way. They can represent determinate or indeterminate progress.

## Example

<Story
  name="a) ProgressBars"
  decorators={[
    (Story) => (
      <StoryCenteredInline>
        <Story />
      </StoryCenteredInline>
    ),
  ]}
>
  <ProgressBar aria-label="Loading…" value={90} />
</Story>

<Source language="tsx" id="status-progressbar--a-progress-bar" />

## Value

ProgressBars are controlled with the `value` prop. By default, the `value` prop represents the current percentage of progress, as the minimum and maxiumum values default to 0 and 100, respectively.

<Story
  name="b) Value"
  decorators={[
    (Story) => (
      <StoryCenteredInline>
        <Story />
      </StoryCenteredInline>
    ),
  ]}
>
  <ProgressBar aria-label="Loading…" value={25} />
</Story>

<Source language="tsx" id="status-ProgressBar--b-value" />

Alternatively, a different scale can be used by setting the `minValue` and `maxValue` props.

<Story
  name="c) Scale"
  decorators={[
    (Story) => (
      <StoryCenteredInline>
        <Story />
      </StoryCenteredInline>
    ),
  ]}
>
  <ProgressBar
    aria-label="Loading…"
    minValue={50}
    maxValue={150}
    value={100}
  />
</Story>

<Source language="tsx" id="status-ProgressBar--c-scale" />

### Indeterminate

By default, ProgressBars are determinate. Use a determinate ProgressBar when progress can be calculated against a specific goal. Use an indeterminate ProgressBar when progress is happening but the time or effort to completion can't be determined.

<Story
  name="d) Indeterminate"
  decorators={[
    (Story) => (
      <StoryCenteredInline>
        <Story />
      </StoryCenteredInline>
    ),
  ]}
>
  <ProgressBar aria-label="Loading…" isIndeterminate />
</Story>

<Source language="tsx" id="status-ProgressBar--d-indeterminate" />

### Accessibility

An `aria-label` must be provided for accessibility. If the ProgressBar is labeled by a separate element, an `aria-labelledby` prop must be provided using the `id` of the labeling element instead.

If using the `overBackground` variant, ensure the background offers enough contrast for the ProgressBar to be legible and meets color contrast guidelines.

### Internationalisation

To internationalise a ProgressBar, a localized string should be passed to the `aria-label` prop (or value of the associated `aria-labelledby` element).

For languages that are read right-to-left (e.g. Hebrew and Arabic), the fill of both determinate and indeterminate ProgressBars continues to spin clockwise.

## Visual options

### Size

<Story
  name="e) Size"
  decorators={[
    (Story) => (
      <StoryCenteredInline>
        <Story />
      </StoryCenteredInline>
    ),
  ]}
>
  <ProgressBar
    aria-label="Loading…"
    marginEnd="size-300"
    size="small"
    value={15}
  />
  <ProgressBar aria-label="Loading…" marginEnd="size-300" value={30} />
  <ProgressBar aria-label="Loading…" size="large" value={60} />
</Story>

<Source language="tsx" id="status-ProgressBar--e-size" />

### Variant

<Story
  name="f) Over background"
  decorators={[
    (Story) => (
      <StoryCenteredInline>
        <Story />
      </StoryCenteredInline>
    ),
  ]}
>
  <ProgressBar aria-label="Loading…" isIndeterminate />
</Story>

<Source language="tsx" id="status-ProgressBar--f-over-background" />

## ProgressBar Props

Check the table below for a full list of props.

<ArgsTable of={ProgressBar} />

## Stying

<Source
  language="css"
  dark
  format={false}
  code={dedent`
    #docs {
      write-some: style-docs;
    }
  `}
/>



## Multi-step ProgressBars
 {/* const totalSteps = 5; // Total number of steps in the multi-step process
  const currentStep = 3; // Current step in the multi-step process */}

<Story
  name="a) Multi-step ProgressBars"
  decorators={[
    (Story) => (
      <StoryCenteredInline>
        <Story />
      </StoryCenteredInline>
    ),
  ]}
>
 <ProgressBar
        totalSteps={5}
        value={3}
        minValue={0}
        maxValue={5}
        label="Step 3 of 5"
      />
</Story>

<Source language="tsx" id="status-progressbar--a-progress-multi-step" />
