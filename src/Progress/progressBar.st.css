@st-namespace "ProgressBar";

.root {
  -st-states: isIndeterminate,
    size(enum(small, medium, large)),
    overBackground,
    multistep(boolean),
    variant(enum(overBackground));

  --loader-bar-size-small: 2px;
  --loader-bar-size-medium: 8px;
  --loader-bar-size-large: 12px;

  --loader-bar-track-color: lightgrey;
  --loader-bar-track-fill-color: green;
  --loader-border-radius: calc(var(--loader-bar-size) / 2);

  /* Defaults to medium */
  --loader-bar-size: var(--loader-bar-size-medium);
}

.root:size(small) {
  --loader-bar-size: var(--loader-bar-size-small);
}

.root:size(large) {
  --loader-bar-size: var(--loader-bar-size-large);
}

.text {
  display: grid;
  margin-bottom: 8px;
}

.label {
  grid-row: 1;
  justify-self: start;
}

.valueLabel {
  grid-row: 1;
  justify-self: end;
}

.bar {
  display: flex;
  justify-content: space-between;
  gap: 8px;
  overflow: hidden;
  border-radius: var(--loader-border-radius);
}

.track {
  -st-states: active;
  flex-grow: 1;
  background-color: var(--loader-bar-track-color);
  border-radius: var(--loader-border-radius);
}

.fill {
  -st-states: isActive;
  height: var(--loader-bar-size);
  border-radius: var(--loader-border-radius);
}

.fill:isActive {
  background-color: var(--loader-bar-track-fill-color);
}

.root:isIndeterminate::fill {
  animation: indeterminateAnimation 1s linear infinite;
}

@keyframes indeterminateAnimation {
  0% {
    transform: translateX(-100%);
  }

  100% {
    transform: translateX(200%);
  }
}
